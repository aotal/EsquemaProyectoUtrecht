
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anexo 1: Creación y exportación Dicom &#8212; Esquema Proyecto Utrecht</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/translations.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/ovoid.png"/>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="prev" title="Bibliografía" href="bibliografia.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/irimed.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Esquema Proyecto Utrecht</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Buscar en la página..." aria-label="Buscar en la página..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="content.html">
   Planteamiento del problema
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="Anotation_nb.html">
     Herramienta de anotación
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="cnn.html">
     Identificación del aplicador sobre MRI: Segmentación del aplicador
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="recon.html">
     Reconstrucción
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bibliografia.html">
     Bibliografía
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Anexo 1: Creación y exportación Dicom
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Parte de la línea de investigación del <a href="http://www.uv.es/radiofisica/index.html">IRIMED</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Navegación de palanca" aria-controls="site-navigation"
                title="Navegación de palanca" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Descarga esta pagina"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/anexo1.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Descargar archivo fuente" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Imprimir en PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Modo de pantalla completa"
                    title="Modo de pantalla completa"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contenido
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduccion">
   Introducción
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tags-comunes-entre-imagenes-y-plan">
   Tags comunes entre imágenes y plan:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tags-de-diferente-valor">
     Tags de diferente valor
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#manufacter-y-manufacturermodelname">
       Manufacter y ManufacturerModelName
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#modality">
       Modality
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#seriesnumber">
       SeriesNumber
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#softwareversion-y-stationname">
       SoftwareVersion y StationName
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sopclassuid">
       SOPClassUID
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sopinstanceuid-y-seriesinstanceuid">
       SOPInstanceUID y SeriesInstanceUID
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tags-no-comunes">
   Tags no comunes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tags-no-sequence">
     Tags no sequence
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#approvalstatus">
       ApprovalStatus
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#brachytreatmenttechnique">
       BrachyTreatmentTechnique
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#brachytreatmenttype">
       BrachyTreatmentType
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#instancecreationdate-y-instancecreationtime">
       InstanceCreationDate y InstanceCreationTime
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#operatorsname">
       OperatorsName
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rtplandate">
       RTPlanDate
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rtplangeometry">
       RTPlanGeometry
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rtplanlabel-y-rtplanname">
       RTPlanLabel y RTPlanName
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rtplantime">
       RTPlanTime
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#timezoneoffsetfromutc">
       TimezoneOffsetFromUTC
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tags-sequence">
     Tags sequence
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fractiongroupsequence">
       FractionGroupSequence
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#referencedstructuresetsequence">
       ReferencedStructureSetSequence
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sourcesequence">
       SourceSequence
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#treatmentmachinesequence">
     TreatmentMachineSequence
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#applicationsetupsequence">
       ApplicationSetupSequence
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="cell tag_remove-input docutils container">
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pytz</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
</div>
<div class="section" id="anexo-1-creacion-y-exportacion-dicom">
<h1>Anexo 1: Creación y exportación Dicom<a class="headerlink" href="#anexo-1-creacion-y-exportacion-dicom" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="introduccion">
<h2>Introducción<a class="headerlink" href="#introduccion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Como proyecto paralelo a la reconstrucción completamente automática y utilizando la herramienta de <a class="reference internal" href="Anotation_nb.html#capitulo-anotation"><span class="std std-ref">anotación</span></a> que hemos desarrollado, podemos utilizar el resultado que proporciona la herramienta para hacer un uso clínico del mismo, es decir, incorporar la reconstrucción realizada al flujo de trabajo. Para ello vamos a investigar la estructura de los ficheros dicom de imágenes y ejemplos de exportación del plan para generar uno que pueda ser importado en Oncentra con la reconstrucción ya hecha.</p>
<div class="tip admonition">
<p class="admonition-title">Acualización</p>
<p>Por facilitar la compatibilidad del fichero dicom generado, usaremos como base uno tomado de una exportación de Oncentra, eliminando los campos privados y rellenándolo con nuestros datos</p>
</div>
</div>
<div class="section" id="tags-comunes-entre-imagenes-y-plan">
<h2>Tags comunes entre imágenes y plan:<a class="headerlink" href="#tags-comunes-entre-imagenes-y-plan" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Hay 23 tags comunes entre un fichero de secuencia de imágenes y uno tipo RTPlan. De ellos, 14 poseen el mismo valor y por lo tanto el mismo viene definido de la MRI. La lista es:</p>
<ul><li>AccessionNumber</li><li>FrameOfReferenceUID</li><li>PatientBirthDate</li><li>PatientID</li><li>PatientName</li><li>PatientSex</li><li>PositionReferenceIndicator</li><li>ReferringPhysicianName</li><li>SpecificCharacterSet</li><li>StudyDate</li><li>StudyDescription</li><li>StudyID</li><li>StudyInstanceUID</li><li>StudyTime</li></ul><div class="section" id="tags-de-diferente-valor">
<h3>Tags de diferente valor<a class="headerlink" href="#tags-de-diferente-valor" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los 9 que nos quedan se muestran en la tabla siguiente con valores ejemplo de tres planes diferentes y de un archivo de imagen:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Plan1</th>
      <th>Plan2</th>
      <th>Plan3</th>
      <th>Imagen</th>
    </tr>
    <tr>
      <th>tag</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Manufacturer</th>
      <td>Nucletron</td>
      <td>Nucletron</td>
      <td>Nucletron</td>
      <td>GE MEDICAL SYSTEMS</td>
    </tr>
    <tr>
      <th>ManufacturerModelName</th>
      <td>Oncentra</td>
      <td>Oncentra</td>
      <td>Oncentra</td>
      <td>Signa HDxt</td>
    </tr>
    <tr>
      <th>Modality</th>
      <td>RTPLAN</td>
      <td>RTPLAN</td>
      <td>RTPLAN</td>
      <td>MR</td>
    </tr>
    <tr>
      <th>SOPClassUID</th>
      <td>1.2.840.10008.5.1.4.1.1.481.5</td>
      <td>1.2.840.10008.5.1.4.1.1.481.5</td>
      <td>1.2.840.10008.5.1.4.1.1.481.5</td>
      <td>1.2.840.10008.5.1.4.1.1.4</td>
    </tr>
    <tr>
      <th>SOPInstanceUID</th>
      <td>1.3.6.1.4.1.2452.6.2743304011.1151359869.12204...</td>
      <td>1.3.6.1.4.1.2452.6.2774509762.1153355867.34264...</td>
      <td>1.3.6.1.4.1.2452.6.2633641423.1222660011.25835...</td>
      <td>1.3.6.1.4.1.2452.6.1019122476.1241727211.17704...</td>
    </tr>
    <tr>
      <th>SeriesInstanceUID</th>
      <td>1.3.6.1.4.1.2452.6.3396086542.1231529005.38488...</td>
      <td>1.3.6.1.4.1.2452.6.2747787005.1263068138.27367...</td>
      <td>1.3.6.1.4.1.2452.6.1938074019.1188018291.41990...</td>
      <td>1.3.6.1.4.1.2452.6.3150457222.1106452005.39453...</td>
    </tr>
    <tr>
      <th>SeriesNumber</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>5</td>
    </tr>
    <tr>
      <th>SoftwareVersions</th>
      <td>OTP V4.5.3.30</td>
      <td>OTP V4.5.2.152</td>
      <td>OTP V4.5.3.30</td>
      <td>['24', 'LX', 'MR Software release:HD16.0_V03_1...</td>
    </tr>
    <tr>
      <th>StationName</th>
      <td>RT-BRACHYT</td>
      <td>PC009761</td>
      <td>PC009761</td>
      <td>NHFEMR04</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Hay una serie de ellos que no nos van a suponer ningún problema. No obstante detengámonos en cada uno de ellos</p>
<div class="section" id="manufacter-y-manufacturermodelname">
<h4>Manufacter y ManufacturerModelName<a class="headerlink" href="#manufacter-y-manufacturermodelname" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Podemos poner en ambos el nombre que queramos por ejemplo <strong>IRIMED</strong> y <strong>UtrechtTool</strong></p>
</div>
<div class="section" id="modality">
<h4>Modality<a class="headerlink" href="#modality" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta debe ser obligatoriamente <strong>RTPlan</strong></p>
</div>
<div class="section" id="seriesnumber">
<h4>SeriesNumber<a class="headerlink" href="#seriesnumber" title="Enlazar permanentemente con este título">¶</a></h4>
<p>En esta pondremos <strong>1</strong></p>
</div>
<div class="section" id="softwareversion-y-stationname">
<h4>SoftwareVersion y StationName<a class="headerlink" href="#softwareversion-y-stationname" title="Enlazar permanentemente con este título">¶</a></h4>
<p>De momento pondremos <strong>1.0</strong> para la primera y <strong>3DSlicer</strong> para la segunda.</p>
<p>Ahora entramos en los campos no tan evidentes</p>
</div>
<div class="section" id="sopclassuid">
<h4>SOPClassUID<a class="headerlink" href="#sopclassuid" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Por lo que vemos en los diferentes planes, este valor es común. EL valor <strong>1.2.840.10008.5.1.4.1.1.481.5</strong> corresponde a un <em>Radiation Therapy Plan Storage</em>.</p>
</div>
<div class="section" id="sopinstanceuid-y-seriesinstanceuid">
<h4>SOPInstanceUID y SeriesInstanceUID<a class="headerlink" href="#sopinstanceuid-y-seriesinstanceuid" title="Enlazar permanentemente con este título">¶</a></h4>
<p>En el caso de estos dos valores las cosas no están tan claras. Parece que poseeen el mismo prefijo que sus equivalentes en el fichero de imagen. La segunda parte corresponde a un número aleatorio de entre 39 y 40 cifras separado en grupos de 10 por puntos. Así pues los generamos con el siguiente código:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;1.3.6.1.4.1.2452.6.&#39;</span>
<span class="k">def</span> <span class="nf">UIDgenerator</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">uid</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">int</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span><span class="o">&gt;=</span><span class="mi">39</span><span class="p">):</span>
             <span class="k">return</span> <span class="n">prefix</span><span class="o">+</span><span class="n">uid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">uid</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">uid</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">uid</span><span class="p">[</span><span class="mi">30</span><span class="p">:]</span>
<span class="n">UIDgenerator</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;1.3.6.1.4.1.2452.6.2325589604.6301039400.3590785649.865558605&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="tags-no-comunes">
<h2>Tags no comunes<a class="headerlink" href="#tags-no-comunes" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="tags-no-sequence">
<h3>Tags no sequence<a class="headerlink" href="#tags-no-sequence" title="Enlazar permanentemente con este título">¶</a></h3>
<ul><li>ApprovalStatus</li><li>BrachyTreatmentTechnique</li><li>BrachyTreatmentType</li><li>InstanceCreationDate</li><li>InstanceCreationTime</li><li>InstitutionalDepartmentName</li><li>OperatorsName</li><li>RTPlanDate</li><li>RTPlanGeometry</li><li>RTPlanLabel</li><li>RTPlanName</li><li>RTPlanTime</li><li>TimezoneOffsetFromUTC</li></ul><div class="section" id="approvalstatus">
<h4>ApprovalStatus<a class="headerlink" href="#approvalstatus" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El valor será <strong>UNAPPROVED</strong></p>
</div>
<div class="section" id="brachytreatmenttechnique">
<h4>BrachyTreatmentTechnique<a class="headerlink" href="#brachytreatmenttechnique" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Pondremos valor <strong>INTERSTITIAL</strong></p>
</div>
<div class="section" id="brachytreatmenttype">
<h4>BrachyTreatmentType<a class="headerlink" href="#brachytreatmenttype" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El valor es <strong>HDR</strong></p>
</div>
<div class="section" id="instancecreationdate-y-instancecreationtime">
<h4>InstanceCreationDate y InstanceCreationTime<a class="headerlink" href="#instancecreationdate-y-instancecreationtime" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Fecha del día de la creación del plan en formato AAAAMMDD y la hora HHMMSS</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Hoy</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Hoy</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">),</span><span class="n">Hoy</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H%M%S&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20210521 121347
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="operatorsname">
<h4>OperatorsName<a class="headerlink" href="#operatorsname" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Cuanquiera. <strong>Plan</strong> por ejemplo.</p>
</div>
<div class="section" id="rtplandate">
<h4>RTPlanDate<a class="headerlink" href="#rtplandate" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La misma que <strong>InstanceCreationTime</strong></p>
</div>
<div class="section" id="rtplangeometry">
<h4>RTPlanGeometry<a class="headerlink" href="#rtplangeometry" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El valor es <strong>PATIENT</strong></p>
</div>
<div class="section" id="rtplanlabel-y-rtplanname">
<h4>RTPlanLabel y RTPlanName<a class="headerlink" href="#rtplanlabel-y-rtplanname" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Por ejemplo <strong>IRIMED</strong> en ambos</p>
</div>
<div class="section" id="rtplantime">
<h4>RTPlanTime<a class="headerlink" href="#rtplantime" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El mismo valor que InstanceCreationTime</p>
</div>
<div class="section" id="timezoneoffsetfromutc">
<h4>TimezoneOffsetFromUTC<a class="headerlink" href="#timezoneoffsetfromutc" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La función que nos da el valor del tag se muestra a continuación</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">DiferenciaUTC</span><span class="p">(</span><span class="n">X</span><span class="o">=</span><span class="s1">&#39;Europe/Madrid&#39;</span><span class="p">):</span>
    <span class="n">delta</span><span class="o">=</span><span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">utcoffset</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
    <span class="n">delta</span><span class="o">=</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="o">*</span><span class="mi">24</span><span class="o">+</span><span class="n">delta</span><span class="o">.</span><span class="n">seconds</span><span class="o">//</span><span class="mi">3600</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:=+03d}</span><span class="s2">00&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DiferenciaUTC</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;+0200&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DiferenciaUTC</span><span class="p">(</span><span class="s1">&#39;US/Pacific&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;-0700&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="tags-sequence">
<h3>Tags sequence<a class="headerlink" href="#tags-sequence" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La lista de tags de secuencia son los siguientes</p>
<ul><li>FractionGroupSequence</li><li>ReferencedStructureSetSequence</li><li>SourceSequence</li><li>TreatmentMachineSequence</li><li>ApplicationSetupSequence</li></ul><p>Salvo que se diga lo contrario siempre nos referiremos a la posición 0 de la secuencia</p>
<div class="section" id="fractiongroupsequence">
<h4>FractionGroupSequence<a class="headerlink" href="#fractiongroupsequence" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Dejaremos el siguiente tag por defecto</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(300a, 0071) Fraction Group Number               IS: &quot;1&quot;
(300a, 0078) Number of Fractions Planned         IS: &quot;1&quot;
(300a, 0080) Number of Beams                     IS: &quot;0&quot;
(300a, 00a0) Number of Brachy Application Setups IS: &quot;1&quot;
(300c, 000a)  Referenced Brachy Application Setup Sequence  1 item(s) ---- 
   (300c, 000c) Referenced Brachy Application Setup IS: &quot;0&quot;
   ---------
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="referencedstructuresetsequence">
<h4>ReferencedStructureSetSequence<a class="headerlink" href="#referencedstructuresetsequence" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El aspecto del tag es el siguiente:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0008, 1150) Referenced SOP Class UID            UI: RT Structure Set Storage
(0008, 1155) Referenced SOP Instance UID         UI: 1.3.6.1.4.1.2452.6.2664562426.1288265039.467152794.2028798075
</pre></div>
</div>
</div>
</div>
<p>Simplemente debemos localizar en el fichero de estructuras los campos SOPClassUID y SOPInstanceUID e incorporar esos valores a los sub tags.</p>
</div>
<div class="section" id="sourcesequence">
<h4>SourceSequence<a class="headerlink" href="#sourcesequence" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Esta secuencia tiene el siguiente aspecto:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">plansimple</span><span class="o">.</span><span class="n">data_element</span><span class="p">(</span><span class="s1">&#39;SourceSequence&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(300a, 0212) Source Number                       IS: &quot;0&quot;
(300a, 0214) Source Type                         CS: &#39;LINE&#39;
(300a, 0226) Source Isotope Name                 LO: &#39;Ir-192&#39;
(300a, 0228) Source Isotope Half Life            DS: &quot;73.81&quot;
(300a, 0229) Source Strength Units               CS: &#39;AIR_KERMA_RATE&#39;
(300a, 022a) Reference Air Kerma Rate            DS: &quot;21733.8274231908&quot;
(300a, 022c) Source Strength Reference Date      DA: &#39;20210323&#39;
(300a, 022e) Source Strength Reference Time      TM: &#39;090355&#39;
(300b, 0010) Private Creator                     LO: &#39;NUCLETRON&#39;
(300b, 1006) Private tag data                    DS: &quot;-100663.0&quot;
(300b, 1007) Private tag data                    DS: &quot;-100693.0&quot;
(300b, 1008) Private tag data                    DT: &#39;20201229143800&#39;
(300b, 100c) Private tag data                    DS: None
</pre></div>
</div>
</div>
</div>
<p>Ignoraremos los private tag data. Para los campos <strong>ReferenceAirKermaRate</strong>,<strong>SourceStrength ReferenceDate</strong> y <strong>SourceStrengthReferenceTime</strong> tenemos dos opciones: O ponemos valores genéricos de fuente, lo más cómodo, o ponemos los valores de la fuente que vayamos a utilizar. Lo demás se puede dejar como en el ejemplo</p>
</div>
</div>
<div class="section" id="treatmentmachinesequence">
<h3>TreatmentMachineSequence<a class="headerlink" href="#treatmentmachinesequence" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para esta secuencia simplemente pondremos lo que teníamos en el ejemplo pero sin los campos privados</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0008, 1090) Manufacturer&#39;s Model Name           LO: &#39;microSelectron-HDR v2&#39;
(300a, 00b2) Treatment Machine Name              SH: &#39;mHDR v2c&#39;
(300b, 0010) Private Creator                     LO: &#39;NUCLETRON&#39;
(300b, 1005) Private tag data                    DS: &quot;-100662.0&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="applicationsetupsequence">
<h4>ApplicationSetupSequence<a class="headerlink" href="#applicationsetupsequence" title="Enlazar permanentemente con este título">¶</a></h4>
<p>En el ejemplo siguiente los dos primeros tags pueden quedar tal cual.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">300</span><span class="n">a</span><span class="p">,</span> <span class="mi">0232</span><span class="p">)</span> <span class="n">Application</span> <span class="n">Setup</span> <span class="n">Type</span>              <span class="n">CS</span><span class="p">:</span> <span class="s1">&#39;GYNECOLOGY&#39;</span>
<span class="p">(</span><span class="mi">300</span><span class="n">a</span><span class="p">,</span> <span class="mi">0234</span><span class="p">)</span> <span class="n">Application</span> <span class="n">Setup</span> <span class="n">Number</span>            <span class="n">IS</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span>
<span class="p">(</span><span class="mi">300</span><span class="n">a</span><span class="p">,</span> <span class="mi">0250</span><span class="p">)</span> <span class="n">Total</span> <span class="n">Reference</span> <span class="n">Air</span> <span class="n">Kerma</span>           <span class="n">DS</span><span class="p">:</span> <span class="s2">&quot;3315.31795903434&quot;</span>
</pre></div>
</div>
<p>El tercero lo podemos calcular como el cociente entre el campo <strong>ReferenceAirKermaRate</strong> y el tiempo total de radiación expresado en horas que será la suma de los tiempos totales de cada fuente, en nuestro caso 1, y de cada uno de los canales.</p>
<p>Para el ejemplo que nos ocupa el plan se llama plancomplejo2 y los valores que buscamos son:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ReferenceAirKermaRate</span><span class="o">=</span><span class="n">plancomplejo2</span><span class="o">.</span><span class="n">data_element</span><span class="p">(</span><span class="s1">&#39;SourceSequence&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ReferenceAirKermaRate</span>
<span class="n">Secuencia</span><span class="o">=</span><span class="n">plancomplejo2</span><span class="o">.</span><span class="n">data_element</span><span class="p">(</span><span class="s1">&#39;ApplicationSetupSequence&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">TiempoTotal</span><span class="o">=</span><span class="p">(</span><span class="n">Secuencia</span><span class="o">.</span><span class="n">ChannelSequence</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ChannelTotalTime</span><span class="o">+</span><span class="n">Secuencia</span><span class="o">.</span><span class="n">ChannelSequence</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ChannelTotalTime</span><span class="o">+</span><span class="n">Secuencia</span><span class="o">.</span><span class="n">ChannelSequence</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">ChannelTotalTime</span><span class="p">)</span><span class="o">/</span><span class="mi">3600</span>
<span class="n">TotalReferenceAirKerma</span><span class="o">=</span><span class="n">ReferenceAirKermaRate</span><span class="o">*</span><span class="n">TiempoTotal</span>
<span class="nb">print</span><span class="p">(</span><span class="n">TotalReferenceAirKerma</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3315.317959034321
</pre></div>
</div>
</div>
</div>
<p>Que como vemos coincide con lo que había en la cabecera. Con respecto al tiempo total, podemos elegir el tiempo que queramos por posición. Este cálculo lo hacemos para que simplemente sea consistente el fichero.
Por otra parte veamos ahora el aspecto de cada uno de los ChannelSequence</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(3006, 0084) Referenced ROI Number               IS: None
(300a, 0110) Number of Control Points            IS: &quot;14&quot;
(300a, 0282) Channel Number                      IS: &quot;1&quot;
(300a, 0284) Channel Length                      DS: &quot;1500.0&quot;
(300a, 0286) Channel Total Time                  DS: &quot;82.6262964446422&quot;
(300a, 0288) Source Movement Type                CS: &#39;STEPWISE&#39;
(300a, 0290) Source Applicator Number            IS: &quot;1&quot;
(300a, 0291) Source Applicator ID                SH: &#39;1&#39;
(300a, 0292) Source Applicator Type              CS: &#39;FLEXIBLE&#39;
(300a, 0294) Source Applicator Name              LO: &#39;&#39;
(300a, 0296) Source Applicator Length            DS: &quot;37.0503443100255&quot;
(300a, 02a0) Source Applicator Step Size         DS: &quot;2.5&quot;
(300a, 02a2) Transfer Tube Number                IS: &quot;1&quot;
(300a, 02a4) Transfer Tube Length                DS: None
(300a, 02c8) Final Cumulative Time Weight        DS: &quot;6.33436977863312&quot;
(300a, 02d0)  Brachy Control Point Sequence  14 item(s) ---- 
   (300a, 0112) Control Point Index                 IS: &quot;0&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;0.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.010310, 4.792519, 9.751305]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;0.0&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;1&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;0.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.010310, 4.792519, 9.751305]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;0.57552659511566&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;2&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;2.5&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.178212, 2.907082, 8.118230]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;0.57552659511566&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;3&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;2.5&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.178212, 2.907082, 8.118230]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;1.61264073848724&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;4&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;5.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.345899, 1.034678, 6.470917]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;1.61264073848724&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;5&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;5.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.345899, 1.034678, 6.470917]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;2.60867154598236&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;6&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;7.5&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.512237, -0.755723, 4.734024]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;2.60867154598236&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;7&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;7.5&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.512237, -0.755723, 4.734024]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;3.57875949144363&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;8&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;10.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.674082, -2.433228, 2.889942]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;3.57875949144363&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;9&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;10.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.674082, -2.433228, 2.889942]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;4.52699571847916&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;10&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;12.5&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.784139, -3.891006, 0.885583]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;4.52699571847916&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;11&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;12.5&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.784139, -3.891006, 0.885583]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;5.44629615545273&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;12&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;15.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.834048, -4.986355, -1.359250]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;5.44629615545273&quot;
   ---------
   (300a, 0112) Control Point Index                 IS: &quot;13&quot;
   (300a, 02d2) Control Point Relative Position     DS: &quot;15.0&quot;
   (300a, 02d4) Control Point 3D Position           DS: [-24.834048, -4.986355, -1.359250]
   (300a, 02d6) Cumulative Time Weight              DS: &quot;6.33436977863312&quot;
   ---------
(300b, 0010) Private Creator                     LO: &#39;NUCLETRON&#39;
(300b, 1000) Private tag data                    IS: &quot;0&quot;
(300b, 100e) Private tag data                    DS: &quot;1.0&quot;
(300b, 1013) Private tag data                    LO: &#39;NO_MODEL_ID&#39;
(300b, 1027) Private tag data                    DS: &quot;6.0&quot;
(300b, 1032) Private tag data                    DS: &quot;0.0&quot;
(300c, 000e) Referenced Source Number            IS: &quot;0&quot;
</pre></div>
</div>
</div>
</div>
<p>Ignoramos como siempre los campos privados. Del tiempo total ya hemos hablado así que lo saltaremos. El <strong>SourceApplicatorLength</strong> debe ser mayor que el recorrido total que hace la fuente a través de los canales. Parece que coincide con lo que reconstruimos sobre la imagen. No obstante, pondremos lo haremos coincidir con la longitud del canal y así evitaremos problemas. En cuanto al <strong>TransferTubeLength</strong>, le daremos un valor de 1000, que son lo que miden los tubos de transferencia de Nucletron. Al <strong>FinalCumulativeTimeWeight</strong> le pasa lo mismo que al tiempo, mientras sea consistente no pasa nada. Vamos ahora al <strong>BrachyControlPointSequence</strong>.
Siempre tendrá un número par de elementos, veamos un ejemplo:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(300a, 0112) Control Point Index                 IS: &quot;6&quot;
(300a, 02d2) Control Point Relative Position     DS: &quot;7.5&quot;
(300a, 02d4) Control Point 3D Position           DS: [-24.512237, -0.755723, 4.734024]
(300a, 02d6) Cumulative Time Weight              DS: &quot;2.60867154598236&quot;
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(300a, 0112) Control Point Index                 IS: &quot;7&quot;
(300a, 02d2) Control Point Relative Position     DS: &quot;7.5&quot;
(300a, 02d4) Control Point 3D Position           DS: [-24.512237, -0.755723, 4.734024]
(300a, 02d6) Cumulative Time Weight              DS: &quot;3.57875949144363&quot;
</pre></div>
</div>
</div>
</div>
<p>Los elementos van numerados de manera correlativa por un índice. La posición relativa es un múltiplo del paso de fuente, en este caso 2.5. El <strong>ControlPoint3DPosition</strong> nos vendrá del programa de reconstrucción descrito en el capítulo sobre <a class="reference internal" href="Anotation_nb.html#capitulo-anotation"><span class="std std-ref">anotación</span></a>. El <strong>CumulativeTimeWeight</strong> al igual que el tiempo lo definiremos consistente con lo que elijamos para cada canal</p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "book"
        },
        kernelOptions: {
            kernelName: "book",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'book'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="bibliografia.html" title="previous page">Bibliografía</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          <div class="extra_footer">
            Esto es solamente un borrador del proyecto
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>